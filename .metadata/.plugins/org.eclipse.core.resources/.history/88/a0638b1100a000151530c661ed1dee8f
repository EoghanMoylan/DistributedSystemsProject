package ie.gmit.sw.queue;

import java.rmi.Naming;
import java.util.concurrent.BlockingQueue;
import ie.gmit.sw.VignereBreaker;

public class VigenereHandler implements Runnable
{
	private BlockingQueue<Request> queue;
	private String result;
	
	public VigenereHandler(BlockingQueue<Request> q)
	{
		this.queue = q;
	}
	
	public void run()
	{
		Request req = queue.take();
		try
		{
			VignereBreaker vb = (VignereBreaker) Naming.lookup("cypher-service");
			result = vb.decrypt(String cypherText, int  maxKeyLength);
		}
		catch (Exception e)
		{
			System.out.println(e);
		}
		
		Out.put(req.getJbNumer(), result);
	}
			
}